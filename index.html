<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VulnBank Pro - Laborat√≥rio Avan√ßado</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --danger: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
        }

        .user-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .objective {
            background: var(--danger);
            color: white;
            padding: 25px;
            text-align: center;
            margin: 25px;
            border-radius: 12px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px var(--danger); }
            to { box-shadow: 0 0 30px var(--warning); }
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            padding: 30px;
        }

        .panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            border-left: 5px solid var(--secondary);
            transition: transform 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-5px);
        }

        .vulnerability-card {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .vulnerability-card:hover {
            border-color: var(--secondary);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .vulnerability-card.critical {
            border-left: 5px solid var(--danger);
        }

        .vulnerability-card.high {
            border-left: 5px solid var(--warning);
        }

        .vulnerability-card.medium {
            border-left: 5px solid var(--secondary);
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: 600;
            color: var(--primary);
        }

        input, textarea, select {
            padding: 12px 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        button {
            padding: 15px 25px;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }

        button.danger {
            background: var(--danger);
        }

        button.danger:hover {
            background: #c0392b;
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border-left: 5px solid var(--secondary);
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .admin-section {
            background: var(--primary);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .hint {
            background: var(--warning);
            color: white;
            padding: 12px 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .hint::before {
            content: "üí°";
            font-size: 1.2em;
        }

        .tab-container {
            margin-top: 20px;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
        }

        .tab {
            padding: 12px 25px;
            background: #e9ecef;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: var(--secondary);
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 0 8px 8px 8px;
        }

        .tab-content.active {
            display: block;
        }

        .network-map {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .node {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #dee2e6;
            transition: all 0.3s ease;
        }

        .node.vulnerable {
            border-color: var(--danger);
            background: #ffeaea;
        }

        .node.secure {
            border-color: var(--success);
            background: #eaffea;
        }

        footer {
            text-align: center;
            padding: 25px;
            background: var(--primary);
            color: white;
            margin-top: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--success);
            width: 0%;
            transition: width 0.5s ease;
        }

        .achievement {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }

        .achievement.unlocked {
            display: block;
            animation: bounce 0.6s ease;
        }

        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>üè¶ VulnBank Pro</h1>
                    <p class="subtitle">Laborat√≥rio Avan√ßado de Seguran√ßa Web - N√≠vel 2</p>
                </div>
                <div class="user-info" id="userInfo">
                    N√£o logado | Progresso: <span id="progressText">0%</span>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress" id="globalProgress"></div>
            </div>
        </header>

        <div class="objective">
            <h2>üéØ OBJETIVO FINAL: Comprometer completamente o sistema banc√°rio</h2>
            <p>1. Roubar R$ 1.000.000 | 2. Acessar dados sens√≠veis | 3. Comprometer servidor</p>
        </div>

        <div class="dashboard">
            <!-- Coluna 1: Ataques Cl√°ssicos -->
            <div class="column">
                <!-- SQL Injection Avan√ßada -->
                <div class="panel">
                    <h2>üóÉÔ∏è SQL Injection Avan√ßada</h2>
                    <div class="hint">
                        Tente: ' UNION SELECT username, password, balance FROM users --
                    </div>
                    
                    <div class="tab-container">
                        <div class="tabs">
                            <button class="tab active" onclick="openTab('loginTab')">Login</button>
                            <button class="tab" onclick="openTab('searchTab')">Busca</button>
                            <button class="tab" onclick="openTab('unionTab')">Union Attack</button>
                        </div>
                        
                        <div id="loginTab" class="tab-content active">
                            <form id="advancedLoginForm">
                                <div class="form-group">
                                    <label>Usu√°rio:</label>
                                    <input type="text" id="advUsername" placeholder="admin' --">
                                </div>
                                <div class="form-group">
                                    <label>Senha:</label>
                                    <input type="password" id="advPassword" placeholder="qualquer coisa">
                                </div>
                                <button type="submit">Explorar SQLi</button>
                            </form>
                        </div>
                        
                        <div id="searchTab" class="tab-content">
                            <form id="userSearchForm">
                                <div class="form-group">
                                    <label>Buscar Usu√°rio:</label>
                                    <input type="text" id="userSearch" placeholder="joao' AND 1=1 --">
                                </div>
                                <button type="submit">Buscar Vulner√°vel</button>
                            </form>
                        </div>
                        
                        <div id="unionTab" class="tab-content">
                            <form id="unionForm">
                                <div class="form-group">
                                    <label>Union Injection:</label>
                                    <input type="text" id="unionPayload" placeholder="' UNION SELECT database(), user(), version() --">
                                </div>
                                <button type="submit">Executar Union</button>
                            </form>
                        </div>
                    </div>
                    
                    <div id="sqlResult" class="result"></div>
                </div>

                <!-- XSS Avan√ßado -->
                <div class="panel">
                    <h2>üéØ XSS Avan√ßado (DOM-Based)</h2>
                    <div class="hint">
                        Payload: <img src=x onerror="stealCookies()">
                    </div>
                    
                    <form id="xssForm">
                        <div class="form-group">
                            <label>URL com XSS:</label>
                            <input type="text" id="xssUrl" placeholder="#<script>alert(1)</script>">
                        </div>
                        <button type="submit">Testar XSS DOM</button>
                    </form>
                    
                    <div id="xssResult" class="result"></div>
                    
                    <div class="hint">
                        <strong>Cookie atual:</strong> <span id="currentCookie">session=null</span>
                    </div>
                </div>
            </div>

            <!-- Coluna 2: Ataques Avan√ßados -->
            <div class="column">
                <!-- SSRF -->
                <div class="panel">
                    <h2>üîó SSRF (Server-Side Request Forgery)</h2>
                    <div class="hint">
                        Tente: file:///etc/passwd ou http://localhost:22
                    </div>
                    
                    <form id="ssrfForm">
                        <div class="form-group">
                            <label>URL para Fetch:</label>
                            <input type="text" id="ssrfUrl" placeholder="http://internal-api/admin">
                        </div>
                        <button type="submit">Explorar SSRF</button>
                    </form>
                    
                    <div id="ssrfResult" class="result"></div>
                </div>

                <!-- XXE -->
                <div class="panel">
                    <h2>üìÑ XXE (XML External Entity)</h2>
                    <div class="hint">
                        Injetar ENTITY maliciosa no XML
                    </div>
                    
                    <form id="xxeForm">
                        <div class="form-group">
                            <label>XML Malicioso:</label>
                            <textarea id="xxePayload" rows="4" placeholder='<?xml version="1.0"?><!DOCTYPE foo [<!ENTITY xxe SYSTEM "file:///etc/passwd">]><foo>&xxe;</foo>'></textarea>
                        </div>
                        <button type="submit">Explorar XXE</button>
                    </form>
                    
                    <div id="xxeResult" class="result"></div>
                </div>

                <!-- Deserializa√ß√£o -->
                <div class="panel">
                    <h2>‚ö° Deserializa√ß√£o Insegura</h2>
                    <div class="hint">
                        Exploit de desserializa√ß√£o de objetos
                    </div>
                    
                    <form id="deserializationForm">
                        <div class="form-group">
                            <label>Dados Serializados:</label>
                            <textarea id="serializedData" rows="3" placeholder='O:8:"stdClass":1:{s:4:"code";s:10:"phpinfo();";}'></textarea>
                        </div>
                        <button type="submit">Desserializar</button>
                    </form>
                    
                    <div id="deserializationResult" class="result"></div>
                </div>
            </div>
        </div>

        <!-- Se√ß√£o de Administra√ß√£o -->
        <div class="admin-section">
            <h2>üëë Painel Administrativo Avan√ßado</h2>
            <div class="hint">
                Acesso: Cookie admin=true | Token: 7h15-15-4-53cr37-70k3n
            </div>
            
            <div class="network-map">
                <div class="node vulnerable" onclick="exploitNode('web-server')">
                    üåê Web Server
                </div>
                <div class="node vulnerable" onclick="exploitNode('database')">
                    üóÑÔ∏è Database
                </div>
                <div class="node" onclick="exploitNode('internal-api')">
                    üîß Internal API
                </div>
                <div class="node" onclick="exploitNode('admin-panel')">
                    üëë Admin Panel
                </div>
            </div>
            
            <div id="adminControls" style="display: none;">
                <button onclick="dumpDatabase()" class="danger">üóÉÔ∏è Dump Complete Database</button>
                <button onclick="executeServerCommand()" class="danger">‚ö° Executar Comando no Servidor</button>
                <button onclick="bypassWAF()" class="danger">üõ°Ô∏è Bypass WAF</button>
            </div>
            
            <div id="adminResult" class="result"></div>
        </div>

        <!-- Conquistas -->
        <div class="panel">
            <h2>üèÜ Conquistas</h2>
            <div id="achievement1" class="achievement">
                ü•á SQL Master - Explorou todas t√©cnicas SQLi
            </div>
            <div id="achievement2" class="achievement">
                ü•à XSS Wizard - Dominou XSS refletido e armazenado
            </div>
            <div id="achievement3" class="achievement">
                ü•â Server Hunter - Comprometeu servidor interno
            </div>
        </div>

        <footer>
            <p>üîí Laborat√≥rio Educacional Avan√ßado - N√≠vel 2</p>
            <p>‚ö†Ô∏è Use apenas em ambiente controlado e para fins educacionais</p>
        </footer>
    </div>

    <script>
        // Sistema avan√ßado
        let labState = {
            progress: 0,
            achievements: [],
            compromisedNodes: [],
            currentUser: null,
            database: {
                users: [
                    { id: 1, username: 'admin', password: '7h15-15-4-53cr37-p455w0rd', balance: 1000000, role: 'admin', email: 'admin@vulnbank.com' },
                    { id: 2, username: 'joao.silva', password: 'Senha123!', balance: 15000, role: 'user', email: 'joao@email.com' },
                    { id: 3, username: 'maria.santos', password: 'M@ria2024', balance: 25000, role: 'user', email: 'maria@empresa.com' }
                ],
                config: {
                    db_host: 'localhost',
                    db_user: 'root',
                    db_pass: 'r00t-p455w0rd!',
                    api_key: '4p1-k3y-53cr37-2024'
                },
                logs: []
            }
        };

        // Sistema de abas
        function openTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // SQL Injection Avan√ßada
        document.getElementById('advancedLoginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('advUsername').value;
            const password = document.getElementById('advPassword').value;
            
            // Simula√ß√£o de banco vulner√°vel
            let query = `SELECT * FROM users WHERE username = '${username}' AND password = '${password}'`;
            document.getElementById('sqlResult').innerHTML = `Query executada: ${query}\n\n`;
            
            // Detec√ß√£o de SQLi
            if (username.includes("' --") || username.includes("' OR '1'='1")) {
                document.getElementById('sqlResult').innerHTML += "‚úÖ SQL Injection detectada!\n";
                document.getElementById('sqlResult').innerHTML += "üìä Todos os usu√°rios vazados:\n";
                
                labState.database.users.forEach(user => {
                    document.getElementById('sqlResult').innerHTML += 
                        `üë§ ${user.username} | üí∞ R$ ${user.balance} | üìß ${user.email}\n`;
                });
                
                updateProgress(20);
                unlockAchievement('achievement1');
            }
        });

        // XSS DOM-Based
        document.getElementById('xssForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const xssPayload = document.getElementById('xssUrl').value;
            
            // Vulnerabilidade DOM XSS
            const urlParams = new URLSearchParams(window.location.search);
            const vulnerableParam = urlParams.get('search') || xssPayload;
            
            document.getElementById('xssResult').innerHTML = 
                `üîç Resultado da busca: ${vulnerableParam}`;
            
            // Simula√ß√£o de roubo de cookie
            if (xssPayload.includes('<script>') || xssPayload.includes('onerror')) {
                document.getElementById('currentCookie').textContent = 
                    'session=stolen_cookie_here; admin=true; token=7h15-15-4-53cr37-70k3n';
                updateProgress(15);
            }
        });

        // SSRF
        document.getElementById('ssrfForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const ssrfUrl = document.getElementById('ssrfUrl').value;
            
            document.getElementById('ssrfResult').innerHTML = 
                `üåê Fazendo requisi√ß√£o para: ${ssrfUrl}\n\n`;
            
            if (ssrfUrl.includes('file://')) {
                document.getElementById('ssrfResult').innerHTML += 
                    "üìÅ Conte√∫do do arquivo local:\n" +
                    "root:x:0:0:root:/root:/bin/bash\n" +
                    "daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin\n" +
                    "bin:x:2:2:bin:/bin:/usr/sbin/nologin";
                updateProgress(25);
            } else if (ssrfUrl.includes('localhost')) {
                document.getElementById('ssrfResult').innerHTML += 
                    "üîì Acesso a servi√ßos internos concedido!\n" +
                    "üìß Internal API Key: " + labState.database.config.api_key;
            }
        });

        // XXE
        document.getElementById('xxeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const xxePayload = document.getElementById('xxePayload').value;
            
            document.getElementById('xxeResult').innerHTML = 
                "üìÑ Processando XML...\n\n";
            
            if (xxePayload.includes('<!ENTITY')) {
                document.getElementById('xxeResult').innerHTML += 
                    "‚úÖ XXE Exploit bem-sucedido!\n" +
                    "üìÅ Conte√∫do de /etc/passwd:\n" +
                    "root:x:0:0:root:/root:/bin/bash\n" +
                    "mysql:x:106:113:MySQL Server:/var/lib/mysql:/bin/false\n" +
                    "üìß Configura√ß√µes do sistema vazadas!";
                updateProgress(20);
            }
        });

        // Deserializa√ß√£o
        document.getElementById('deserializationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const serializedData = document.getElementById('serializedData').value;
            
            document.getElementById('deserializationResult').innerHTML = 
                "‚ö° Desserializando dados...\n\n";
            
            try {
                // Simula√ß√£o de desserializa√ß√£o vulner√°vel
                if (serializedData.includes('phpinfo') || serializedData.includes('system')) {
                    document.getElementById('deserializationResult').innerHTML += 
                        "‚úÖ RCE via Desserializa√ß√£o!\n" +
                        "üöÄ Comando executado no servidor\n" +
                        "üìÅ Listando diret√≥rio:\n" +
                        "drwxr-xr-x 12 root root   4096 Dec  1 10:30 .\n" +
                        "-rw-r--r--  1 root root   1234 Dec  1 09:15 config.php\n" +
                        "-rw-------  1 root root   5678 Dec  1 08:20 database.conf";
                    updateProgress(20);
                }
            } catch (e) {
                document.getElementById('deserializationResult').innerHTML += 
                    "‚ùå Erro na desserializa√ß√£o: " + e.message;
            }
        });

        // Sistema de progresso
        function updateProgress(points) {
            labState.progress += points;
            if (labState.progress > 100) labState.progress = 100;
            
            document.getElementById('globalProgress').style.width = labState.progress + '%';
            document.getElementById('progressText').textContent = labState.progress + '%';
            
            document.getElementById('userInfo').innerHTML = 
                `Progresso: ${labState.progress}% | Conquistas: ${labState.achievements.length}`;
        }

        function unlockAchievement(achievementId) {
            const achievement = document.getElementById(achievementId);
            if (!achievement.classList.contains('unlocked')) {
                achievement.classList.add('unlocked');
                labState.achievements.push(achievementId);
            }
        }

        // Explora√ß√£o de n√≥s
        function exploitNode(node) {
            if (!labState.compromisedNodes.includes(node)) {
                labState.compromisedNodes.push(node);
                updateProgress(5);
                
                if (labState.compromisedNodes.length >= 2) {
                    document.getElementById('adminControls').style.display = 'block';
                }
            }
        }

        // Fun√ß√µes administrativas
        function dumpDatabase() {
            document.getElementById('adminResult').innerHTML = 
                "üóÉÔ∏è DUMP COMPLETO DO DATABASE:\n\n" +
                "=== USU√ÅRIOS ===\n" +
                JSON.stringify(labState.database.users, null, 2) + "\n\n" +
                "=== CONFIGURA√á√ïES ===\n" +
                JSON.stringify(labState.database.config, null, 2) + "\n\n" +
                "‚úÖ Database comprometido completamente!";
            updateProgress(30);
        }

        function executeServerCommand() {
            document.getElementById('adminResult').innerHTML = 
                "‚ö° EXECUTANDO COMANDOS NO SERVIDOR:\n\n" +
                "$ whoami\nroot\n\n" +
                "$ ls -la /root\n" +
                "-rw-------  1 root root 1234 Dec  1 config.php\n" +
                "-rw-------  1 root root 5678 Dec  1 secrets.txt\n\n" +
                "üöÄ Servidor completamente comprometido!";
            updateProgress(25);
        }

        function bypassWAF() {
            document.getElementById('adminResult').innerHTML = 
                "üõ°Ô∏è BYPASSING WAF...\n\n" +
                "‚úÖ WAF contornado com sucesso!\n" +
                "üìä T√©cnicas utilizadas:\n" +
                "‚Ä¢ Unicode encoding\n" +
                "‚Ä¢ HTTP parameter pollution\n" +
                "‚Ä¢ Case variation\n" +
                "‚Ä¢ SQL comments injection";
            updateProgress(15);
        }

        // Inicializa√ß√£o
        document.getElementById('userInfo').innerHTML = 
            `Progresso: 0% | Conquistas: 0`;
    </script>
</body>
</html>
